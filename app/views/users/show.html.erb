<h1><%= @user.username %>'s Page</h1>

<% if current_user == @user %>
  <form action="<%= goals_url %>" method="post">
    <%= auth_token %>
    <strong>New Goal</strong>
    <br>
    <label for="goal_title">Title</label>
    <input type="text"
           id="goal_title"
           name="goal[title]"
           value="<%= @goal.title %>">
    <br><br>
    <label for="goal_description">Description</label>
    <textarea id="goal_description"
              name="goal[description]"
              value="<%= @goal.description %>"></textarea>
    <br><br>
    <label for="goal_public">Public</label>
    <input type="radio"
           id="goal_public"
           name="goal[public]"
           value="true"
           <%= "selected" if @goal.public %>>
    <label for="goal_private">Private</label>
    <input type="radio"
           id="goal_private"
           name="goal[public]"
           value="false"
           <%= "selected" unless @goal.public %>>
    <br><br>
    <input type="submit" value="Create Goal">
  </form>
  <br><br>
<% end %>

<ul>
  <% @user.goals.each do |goal| %>

    <% if goal.public || (current_user == @user) %>
      <li><a href="<%= user_goal_url(@user,goal) %>"><%= goal.title %></a></li>
    <% end %>
  <% end %>
</ul>

<br>
<% if current_user %>
  <form action="<%= user_user_comments_url(@user) %>" method="post">
    <%= auth_token %>
    <label for="comment_body">Comment</label>
    <textarea id="comment_body" name="user_comment[body]"></textarea><br>
    <input type="submit" value="Post Comment">
  </form>
<% end %>
<ul>
  <% @user.comments.each do |comment| %>
    <li><%= comment.author.username %> says: <%= comment.body %></li>
  <% end %>
</ul>